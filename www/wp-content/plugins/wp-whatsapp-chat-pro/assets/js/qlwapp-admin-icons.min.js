!function($){var Icons=Backbone.Model.extend({defaults:{icon:"qlwapp-whatsapp-icon"}}),IconsView=Backbone.View.extend({events:{"click .icons .attachment":"select","click .media-modal-backdrop":"close","click .media-modal-close":"close","submit .media-modal-form":"submit"},templates:{},initialize:function(){_.bindAll(this,"open","render","close","submit"),this.init(),this.open()},init:function(){this.templates.window=wp.template("qlwapp-modal-window")},current:function(e){"use strict";var modal=this;""!=this.model.attributes.icon&&this.$el.find("."+this.model.attributes.icon).closest("li").focus()},select:function(e){"use strict";this.model.set({icon:$(e.target).find("i").attr("class")}),this.render(),this.enable()},render:function(){var modal=this;this.$el.html(this.templates.window(this.model.attributes)),this.current()},open:function(e){this.render(),$("body").addClass("modal-open").append(this.$el)},close:function(e){e.preventDefault(),this.undelegateEvents(),$(document).off("focusin"),$("body").removeClass("modal-open"),this.remove()},enable:function(e){$(".media-modal-submit").prop("disabled",!1)},submit:function(e){e.preventDefault();var modal=this,$input=$('input[name="icon"]');$input.length&&this.model.attributes.icon&&$input.val(this.model.attributes.icon),this.close(e)}}),IconsModal=Backbone.View.extend({initialize:function(e){var $button,icon=$(e.target).closest("tr").find("input[name=icon]").val(),model=new Icons;model.set({icon:icon}),new IconsView({model:model})}});$("#qlwapp_icon_add").on("click",(function(e){e.preventDefault(),new IconsModal(e)}))}(jQuery);